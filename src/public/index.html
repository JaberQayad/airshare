<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AirShare - Peer-to-Peer File Sharing</title>
    <meta name="description" content="Share files directly between browsers. Fast, secure, and private.">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Background Shapes -->
    <div class="background-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
    </div>

    <!-- SVG Icons -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
        <use href="icons.svg#icon-sun"></use>
        <use href="icons.svg#icon-moon"></use>
        <use href="icons.svg#icon-upload"></use>
        <use href="icons.svg#icon-copy"></use>
        <use href="icons.svg#icon-download"></use>
        <use href="icons.svg#icon-pause"></use>
        <use href="icons.svg#icon-play"></use>
        <use href="icons.svg#icon-x"></use>
    </svg>

    <div class="container">
        <header>
            <div class="logo">
                <svg class="logo-icon" width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13 2L3 14h8l-1 8 10-12h-8l1-8z" fill="currentColor"/>
                </svg>
                <h1>AirShare</h1>
            </div>
            <p class="subtitle">Peer-to-peer file transfers in your browser.</p>
            <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme">
                <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24">
                    <use href="icons.svg#icon-sun"></use>
                </svg>
                <svg class="moon-icon hidden" width="20" height="20" viewBox="0 0 24 24">
                    <use href="icons.svg#icon-moon"></use>
                </svg>
            </button>
        </header>

        <main>
            <!-- Status Badge -->
            <div class="status-badge">
                <span class="status-dot"></span>
                <span id="statusText">Ready</span>
            </div>

            <!-- Sender UI (File Selection) -->
            <div id="senderSection" class="section">
                <div id="dropZone" class="drop-zone">
                    <svg class="upload-icon" width="48" height="48" viewBox="0 0 24 24">
                        <use href="icons.svg#icon-upload"></use>
                    </svg>
                    <h2>Drop files here</h2>
                    <p>or click to browse ‚Ä¢ Multiple files supported</p>
                    <input type="file" id="fileInput" multiple hidden>
                </div>

                <!-- Selected Files List -->
                <div id="fileList" class="file-list"></div>
                <div class="file-summary hidden" id="fileSummary">
                    <span id="fileCount">0 files</span> ‚Ä¢ <span id="totalSize">0 Bytes</span>
                </div>

                <!-- Password Protection -->
                <div id="passwordSection" class="password-section hidden">
                    <h3>üîí Protect with password (optional)</h3>
                    <div class="password-input-group">
                        <input type="password" id="passwordInput" placeholder="Enter password">
                        <button id="passwordToggle" class="password-toggle">üëÅÔ∏è</button>
                    </div>
                </div>

                <!-- Share Link Section -->
                <div id="linkSection" class="link-section hidden">
                    <h3>üì§ Share this link:</h3>
                    <div class="link-container">
                        <input type="text" id="shareLinkInput" readonly>
                        <button id="copyButton" class="icon-button">
                            <svg width="20" height="20" viewBox="0 0 24 24">
                                <use href="icons.svg#icon-copy"></use>
                            </svg>
                        </button>
                    </div>
                    <div id="qrcode" class="qrcode-wrapper"></div>
                    <div id="peerInfo" class="peer-info">
                        <p>Peer ID: <code id="senderId"></code></p>
                        <p>Status: <span id="senderStatus">Waiting for receiver...</span></p>
                    </div>
                </div>
            </div>

            <!-- Receiver UI (Download) -->
            <div id="receiverSection" class="section hidden">
                <div class="file-info">
                    <span class="file-icon">üìÑ</span>
                    <div>
                        <h3 id="fileName">...</h3>
                        <p id="fileSize">...</p>
                    </div>
                </div>
                
                <!-- Password Input for Receiver -->
                <div id="receiverPasswordSection" class="password-section hidden">
                    <h3>üîí Password required</h3>
                    <input type="password" id="receiverPassword" placeholder="Enter password to download">
                </div>
                
                <button id="downloadButton" class="btn-primary" disabled>
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <use href="icons.svg#icon-download"></use>
                    </svg>
                    <span>Start Download</span>
                </button>
                
                <div id="receiverPeerInfo" class="peer-info">
                    <p>Peer ID: <code id="receiverId"></code></p>
                    <p>Status: <span id="receiverStatus">Connecting...</span></p>
                </div>
            </div>

            <!-- Transfer Progress -->
            <div id="transferSection" class="transfer-section hidden">
                <div class="progress-container">
                    <div id="progressBar" class="progress-bar"></div>
                </div>
                <div id="transferStatus" class="transfer-status">
                    <div class="transfer-info">
                        <span id="progressText">0%</span>
                        <span id="speedText">0 KB/s</span>
                        <span id="etaText">ETA: --</span>
                    </div>
                    <div class="transfer-controls">
                        <button id="pauseButton" class="btn-control">
                            <svg width="16" height="16" viewBox="0 0 24 24">
                                <use href="icons.svg#icon-pause"></use>
                            </svg>
                            <span>Pause</span>
                        </button>
                        <button id="cancelButton" class="btn-control btn-danger">
                            <svg width="16" height="16" viewBox="0 0 24 24">
                                <use href="icons.svg#icon-x"></use>
                            </svg>
                            <span>Cancel</span>
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <div class="footer-row">
                <div class="footer-links">
                    <a href="https://buymeacoffee.com/Jay_me" target="_blank" class="footer-link">Buy Me A Coffee</a>
                    <span class="separator">‚Ä¢</span>
                    <a href="https://sites.google.com/view/airshare-app/home" target="_blank" class="footer-link">Terms of Use</a>
                </div>
                <details class="footer-info" role="status" aria-live="polite">
                    <summary class="footer-call" aria-label="Info">
                        <span class="call-sign">?</span>
                        <span class="call-caret">‚ñæ</span>
                    </summary>
                    <div class="footer-info-content">
                        <p>Secure peer-to-peer file sharing ‚Ä¢ No server storage ‚Ä¢ End-to-end encrypted</p>
                        <p class="features">Multiple files ‚Ä¢ Password protection ‚Ä¢ Pause/Resume ‚Ä¢ Works everywhere</p>
                    </div>
                </details>
            </div>
        </footer>
    </div>

    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>
